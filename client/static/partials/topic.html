<div ng-controller = 'TopicController'>

	<a href = '#/dashboard'>Dashboard</a>
	<a href = '' ng-click = 'logout()'>Logout</a>

	<p><a href = '' ng-click = 'showUser(topic.user)' ng-bind = 'topic.user.name'></a> posted a topic:</p>

	<h3 ng-bind = 'topic.name'></h3>
	<h4>Description: <span ng-bind = 'topic.description'></span></h4>

	<h4>Post your answer here:</h4>
	<p ng-bind = 'error'>
	<form ng-submit = 'addPost()'>
		<textarea ng-model = 'newPost.text'></textarea>
		<input type = 'submit' value = 'Post'>
	</form>

	<!--ANSWERS ordered by net difference in upvotes-downvotes-->
	<div ng-repeat = 'post in topic.posts | orderBy:"upvotes":true track by $index'>
		<p><a href = '' ng-click = 'showUser(post.user)' ng-bind = 'post.user.name'></a>: <span ng-bind = 'post.text'></span></p>
		<button ng-click = 'upvote(post)'>Up</button> 
		<span ng-bind = 'post.upvotes'></span>
		<button ng-click = 'downvote(post)'>Down</button>
		<span ng-bind = 'post.downvotes'></span>
		<p ng-repeat = 'comment in post.comments'><a href = '' ng-click = 'showUser(comment.user)' ng-bind = 'comment.user.name'></a>: <span ng-bind = 'comment.text'></span></p>
		<form ng-submit = 'addComment(post)'>
			<textarea ng-model = post.newComment></textarea>
			<input type = 'submit' value = "Comment">
		</form>
	</div>

</div>